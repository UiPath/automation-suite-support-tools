"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[5476],{5672:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var o=n(5893),t=n(1151);const s={},a="RKE2 Fails To Start If fapolicyd Is Enabled",c={id:"generic/fapolicyd",title:"RKE2 Fails To Start If fapolicyd Is Enabled",description:"This is not official documentation for AutomationSuite",source:"@site/docs/generic/fapolicyd.md",sourceDirName:"generic",slug:"/generic/fapolicyd",permalink:"/automation-suite-support-tools/docs/generic/fapolicyd",draft:!1,unlisted:!1,editUrl:"https://uipath.github.com/UiPath/automation-suite-support-tools/edit/master/docs/docs/generic/fapolicyd.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Known Issues",permalink:"/automation-suite-support-tools/docs/category/known-issues"},next:{title:"VMWare Cilium Internode Communication Broken",permalink:"/automation-suite-support-tools/docs/generic/vmware_checksum"}},r={},l=[{value:"Issue Description",id:"issue-description",level:3},{value:"Root Cause",id:"root-cause",level:3},{value:"Resolution",id:"resolution",level:3}];function d(e){const i={admonition:"admonition",code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.h1,{id:"rke2-fails-to-start-if-fapolicyd-is-enabled",children:"RKE2 Fails To Start If fapolicyd Is Enabled"}),"\n",(0,o.jsx)(i.admonition,{title:"Note",type:"danger",children:(0,o.jsx)(i.p,{children:"This is not official documentation for AutomationSuite"})}),"\n",(0,o.jsx)(i.h3,{id:"issue-description",children:"Issue Description"}),"\n",(0,o.jsx)(i.p,{children:"RKE2 fails to start if fapolicyd is enabled and running as a process, and this causes an infra installation of Automation Suite (AS) to fail."}),"\n",(0,o.jsx)(i.h3,{id:"root-cause",children:"Root Cause"}),"\n",(0,o.jsx)(i.p,{children:"RKE2 is using containerd as its container engine and it uses runc as its container runtime."}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.code,{children:"fapolicyd"})," -- seemingly one of the security tools required by organizations practicing STIGS-- blocks an execution of ",(0,o.jsx)(i.code,{children:"runc"})," which causes RKE2 to fail. Also, ",(0,o.jsx)(i.code,{children:"podman"}),", which is used for validating prereqs and managing container images in offline setup, uses ",(0,o.jsx)(i.code,{children:"runc"})," as well, so fapolicyd also causes ",(0,o.jsx)(i.code,{children:"podman"})," to fail."]}),"\n",(0,o.jsx)(i.h3,{id:"resolution",children:"Resolution"}),"\n",(0,o.jsx)(i.p,{children:"Disable fapolicyd and then resume infra installation"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo systemctl stop fapolicyd && sudo systemctl disable fapolicyd\n"})})]})}function u(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,i,n)=>{n.d(i,{Z:()=>c,a:()=>a});var o=n(7294);const t={},s=o.createContext(t);function a(e){const i=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(s.Provider,{value:i},e.children)}}}]);