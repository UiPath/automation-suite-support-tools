"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[524],{9426:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var n=t(5893),a=t(1151);const r={sidebar_position:3},s="CEPH OnDemand Backup",c={id:"ceph/ceph-ondemand-backup",title:"CEPH OnDemand Backup",description:"This is not official documentation for AutomationSuite",source:"@site/docs/ceph/ceph-ondemand-backup.md",sourceDirName:"ceph",slug:"/ceph/ceph-ondemand-backup",permalink:"/automation-suite-support-tools/docs/ceph/ceph-ondemand-backup",draft:!1,unlisted:!1,editUrl:"https://uipath.github.com/UiPath/automation-suite-support-tools/edit/master/docs/docs/ceph/ceph-ondemand-backup.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"CEPH Rebuilding OSD",permalink:"/automation-suite-support-tools/docs/ceph/ceph-rebuilding-osd"},next:{title:"Re-Create CEPH Cluster",permalink:"/automation-suite-support-tools/docs/ceph/ceph-recreate-cluster"}},i={},d=[];function p(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"ceph-ondemand-backup",children:"CEPH OnDemand Backup"}),"\n",(0,n.jsx)(o.admonition,{title:"Note",type:"danger",children:(0,n.jsx)(o.p,{children:"This is not official documentation for AutomationSuite"})}),"\n",(0,n.jsxs)(o.p,{children:["We can take an on-demand ceph objectstore backup via ",(0,n.jsx)(o.a,{href:"https://docs.uipath.com/automation-suite/automation-suite/2023.10/installation-guide/migrating-data-between-objectstores",children:"ceph-on-demand-backup"})]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"[root@server0 ~]# wget -O ~/objectstore-migration.sh https://download.uipath.com/automation-suite/objectstore-migration.sh\n--2023-02-01 15:18:23--  https://download.uipath.com/automation-suite/objectstore-migration.sh\nResolving download.uipath.com (download.uipath.com)... 104.19.252.9, 104.19.251.9, 2606:4700::6813:fb09, ...\nConnecting to download.uipath.com (download.uipath.com)|104.19.252.9|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 27661 (27K) [application/x-sh]\nSaving to: \u2018/root/objectstore-migration.sh\u2019\n\n/root/objectstore-migration.sh                              100%[=========================================================================================================================================>]  27.01K  --.-KB/s    in 0s\n\n2023-02-01 15:18:23 (65.8 MB/s) - \u2018/root/objectstore-migration.sh\u2019 saved [27661/27661]\n\n[root@server0 ~]#\n[root@server0 ~]# object_size=$(kubectl -n rook-ceph exec deploy/rook-ceph-tools -- ceph status --format json | jq -r '.pgmap.data_bytes')\n[root@server0 ~]# echo \"You need '$(numfmt --to=iec-i $object_size)' storage space\"\nYou need '915Mi' storage space\n[root@server0 ~]# export CEPH_BACKUP_PATH=/datadisk/backup\n[root@server0 ~]# mkdir -p $CEPH_BACKUP_PATH\n[root@server0 ~]# export CEPH_OPERATION=backup\n[root@server0 ~]# chmod +x objectstore-migration.sh\n[root@server0 ~]# ./objectstore-migration.sh\nconfigmap/ceph-objectstore-ondemand-backup-restore-cm created\nserviceaccount/ceph-objectstore-ondemand-backup-restore-sa created\nrole.rbac.authorization.k8s.io/ceph-objectstore-ondemand-backup-restore-role created\nrolebinding.rbac.authorization.k8s.io/ceph-objectstore-ondemand-backup-restore-rolebinding created\njob.batch/ceph-objectstore-ondemand-backup-job created\njob.batch/ceph-objectstore-ondemand-backup-job condition met\n[root@server0 ~]#\n"})})]})}function u(e={}){const{wrapper:o}={...(0,a.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},1151:(e,o,t)=>{t.d(o,{Z:()=>c,a:()=>s});var n=t(7294);const a={},r=n.createContext(a);function s(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(r.Provider,{value:o},e.children)}}}]);